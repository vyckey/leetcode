# [139. ÂçïËØçÊãÜÂàÜ](https://leetcode.cn/problems/word-break)

# È¢òÁõÆÊèèËø∞

Áªô‰Ω†‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ `s` Âíå‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂàóË°® `wordDict` ‰Ωú‰∏∫Â≠óÂÖ∏„ÄÇÂ¶ÇÊûúÂèØ‰ª•Âà©Áî®Â≠óÂÖ∏‰∏≠Âá∫Áé∞ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÂçïËØçÊãºÊé•Âá∫ `s` ÂàôËøîÂõû `true`„ÄÇ

**Ê≥®ÊÑè**Ôºö‰∏çË¶ÅÊ±ÇÂ≠óÂÖ∏‰∏≠Âá∫Áé∞ÁöÑÂçïËØçÂÖ®ÈÉ®ÈÉΩ‰ΩøÁî®ÔºåÂπ∂‰∏îÂ≠óÂÖ∏‰∏≠ÁöÑÂçïËØçÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®„ÄÇ

Á§∫‰æã 1Ôºö

> ËæìÂÖ•: `s = "leetcode", wordDict = ["leet", "code"]`
> ËæìÂá∫: `true`
> Ëß£Èáä: ËøîÂõû `true` Âõ†‰∏∫ `"leetcode"` ÂèØ‰ª•Áî± `"leet"` Âíå `"code"` ÊãºÊé•Êàê„ÄÇ

Á§∫‰æã 2Ôºö

> ËæìÂÖ•: `s = "applepenapple", wordDict = ["apple", "pen"]`
> ËæìÂá∫: `true`
> Ëß£Èáä: ËøîÂõû `true` Âõ†‰∏∫ `"applepenapple"` ÂèØ‰ª•Áî± `"apple"` `"pen"` `"apple"` ÊãºÊé•Êàê„ÄÇÊ≥®ÊÑèÔºå‰Ω†ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®Â≠óÂÖ∏‰∏≠ÁöÑÂçïËØç„ÄÇ

Á§∫‰æã 3Ôºö

> ËæìÂÖ•: `s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]`
> ËæìÂá∫: `false`

ÊèêÁ§∫Ôºö

* 1 <= `s.length` <= 300
* 1 <= `wordDict.length` <= 1000
* 1 <= `wordDict[i].length` <= 20
* `s` Âíå `wordDict[i]` ‰ªÖÁî±Â∞èÂÜôËã±ÊñáÂ≠óÊØçÁªÑÊàê
* `wordDict` ‰∏≠ÁöÑÊâÄÊúâÂ≠óÁ¨¶‰∏≤ **‰∫í‰∏çÁõ∏Âêå**

## ÂâçÁΩÆÁü•ËØÜ

- [Âä®ÊÄÅËßÑÂàí](https://github.com/azl397985856/leetcode/blob/master/thinkings/dynamic-programming.md)

## ÂÖ¨Âè∏

- ÈòøÈáå
- ËÖæËÆØ
- ÁôæÂ∫¶
- Â≠óËäÇ

## ÊÄùË∑Ø

ËøôÈÅìÈ¢òÊòØÁªôÂÆö‰∏Ä‰∏™Â≠óÂÖ∏Âíå‰∏Ä‰∏™Âè•Â≠êÔºåÂà§Êñ≠ËØ•Âè•Â≠êÊòØÂê¶ÂèØ‰ª•Áî±Â≠óÂÖ∏ÈáåÈù¢ÁöÑÂçïËØçÁªÑÂá∫Êù•Ôºå‰∏Ä‰∏™ÂçïËØçÂèØ‰ª•Áî®Â§öÊ¨°„ÄÇ

Êö¥ÂäõÁöÑÊñπÊ≥ïÊòØÊó†Ëß£ÁöÑÔºåÂ§çÊùÇÂ∫¶ÊØîËæÉÈ´òÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøá„ÄÇ

Êö¥ÂäõÊÄùË∑ØÊòØ‰ªéÂåπÈÖç‰ΩçÁΩÆ 0 ÂºÄÂßãÂåπÈÖçÔºå Âú® wordDict ‰∏≠‰∏Ä‰∏™‰∏™ÊâæÔºåÂ¶ÇÊûúÂÖ∂ËÉΩÂíå s ÂåπÈÖç‰∏äÂ∞±Â∞ùËØïËøõË°åÂåπÈÖçÔºåÂπ∂Êõ¥Êñ∞ÂåπÈÖç‰ΩçÁΩÆ„ÄÇ

ÊØîÂ¶Ç s = "leetcode", wordDict = ["leet", "code"]„ÄÇ

ÈÇ£‰πàÔºö

- ÂÖàËØïËØï leet ÂèØ‰ª•ÂåπÈÖç‰πàÔºüÂèØ‰ª•ÁöÑÔºåÂåπÈÖçÂêé s Ââ©‰∏ã codeÔºåÁªßÁª≠Âú® wordDict ‰∏≠Êâæ„ÄÇ
- leet ÂèØ‰ª•ÂåπÈÖç‰πàÔºü‰∏çËÉΩÔºÅcode ËÉΩÂ§üÂåπÈÖç‰πàÔºüÂèØ‰ª•ÔºÅËøîÂõû true ÁªìÊùü

Â¶ÇÊûú wordDict ÈÅçÂéÜ‰∏ÄÊ¨°Ê≤°Êúâ‰ªª‰ΩïËøõÂ±ïÔºåÈÇ£‰πàÁõ¥Êé•ËøîÂõû false„ÄÇ

Ê≥®ÊÑèÂà∞Â¶ÇÊûúÂåπÈÖçÊàêÂäü‰∏ÄÊ¨°ÂêéÔºåÊú¨Ë¥®ÊòØÊääÈóÆÈ¢òËßÑÊ®°Áº©Â∞è‰∫ÜÔºåÈóÆÈ¢òÊÄßË¥®‰∏çÂèòÔºåÂõ†Ê≠§ÂèØ‰ª•‰ΩøÁî®Âä®ÊÄÅËßÑÂàíÊù•Ëß£ÂÜ≥„ÄÇ

```py
@cache
def dp(pos):
    if pos == len(s): return True
    for word in wordDict:
        if s[pos:pos+len(word)] == word and dp(pos + len(word)): return True
    return False
return dp(0)
```

Â§çÊùÇÂ∫¶‰∏∫ $O(n^2 * m)$ ÂÖ∂‰∏≠ n ‰∏∫ s ÈïøÂ∫¶Ôºå m ‰∏∫ wordDict ÈïøÂ∫¶„ÄÇ

Êàë‰ª¨Áî®ÂõæÊù•ÊÑüÂèó‰∏Ä‰∏ãÔºö

![139.word-break-1](https://p.ipic.vip/5b21ws.jpg)

Êé•‰∏ãÊù•Êàë‰ª¨‰ª•È¢òÁõÆÁªôÁöÑ‰æãÂ≠êÂàÜÊ≠•È™§Ëß£ËØª‰∏Ä‰∏ãÔºö

Ôºà‰ª•‰∏ãÁöÑÂõæÂ∑¶ËæπÈÉΩ‰ª£Ë°® sÔºåÂè≥ËæπÈÉΩÊòØ dictÔºåÁÅ∞Ëâ≤‰ª£Ë°®Ê≤°ÊúâÂ§ÑÁêÜÁöÑÂ≠óÁ¨¶ÔºåÁªøËâ≤‰ª£Ë°®ÂåπÈÖçÊàêÂäüÔºåÁ∫¢Ëâ≤‰ª£Ë°®ÂåπÈÖçÂ§±Ë¥•Ôºâ

![139.word-break-2](https://p.ipic.vip/j3tv58.jpg)

![139.word-break-3](https://p.ipic.vip/b19e31.jpg)

![139.word-break-4](https://p.ipic.vip/dqxyvj.jpg)

![139.word-break-5](https://p.ipic.vip/w4t8bo.jpg)

‰∏äÈù¢ÂàÜÊ≠•Ëß£Èáä‰∫ÜÁÆóÊ≥ïÁöÑÂü∫Êú¨ËøáÁ®ãÔºå‰∏ãÈù¢Êàë‰ª¨ÊÑüÊÄßËÆ§ËØÜ‰∏ãËøôÈÅìÈ¢òÔºåÊàëÊääÂÆÉÊØîÂñª‰∏∫
‰Ω†Ê≠£Âú®`ÂæÄ‰∏Ä‰∏™ËÄÅÂºèÊâãÁîµÁ≠íüî¶‰∏≠Ë£ÖÁîµÊ±†`

![139.word-break-6](https://p.ipic.vip/yu4j2f.jpg)

Êàë‰ª¨ÂèØ‰ª•Ëøõ‰∏ÄÊ≠•‰ºòÂåñÔºå ‰ΩøÂæóÂ§çÊùÇÂ∫¶Âíå m Êó†ÂÖ≥„ÄÇ‰ºòÂåñÁöÑÂÖ≥ÈîÆÊòØÂú® dp ÂáΩÊï∞ÂÜÖÈÉ®Êûö‰∏æÂåπÈÖçÁöÑÈïøÂ∫¶ k„ÄÇËøôÊ†∑Êàë‰ª¨Êà™Âèñ s[pos:pos+k] ÂÖ∂‰∏≠ pos Ë°®Á§∫ÂΩìÂâçÂåπÈÖçÂà∞ÁöÑ‰ΩçÁΩÆ„ÄÇÁÑ∂ÂêéÂè™Ë¶ÅÁúã s[pos:pos+k]  Âú® wordDict Â≠òÂú®‰∏éÂê¶Â∞±Ë°å„ÄÇÂ≠òÂú®‰∫ÜÂ∞±Êõ¥Êñ∞ÂåπÈÖç‰ΩçÁΩÆÁªßÁª≠Ôºå‰∏çÂ≠òÂú®Â∞±ÁªßÁª≠„ÄÇËÄå*Áúã s[pos:pos+k]  Âú® wordDict Â≠òÂú®‰∏éÂê¶Â∞±Ë°å* ÊòØÂèØ‰ª•ÈÄöËøáÂ∞Ü wordDict ‰∏≠ÊîæÂÖ•ÂìàÂ∏åÈõÜÂêà‰∏≠ËøõË°å‰ºòÂåñÁöÑÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶ O(1)ÔºåÁâ∫Áâ≤‰∏ÄÁÇπÁ©∫Èó¥ÔºåÁ©∫Èó¥Â§çÊùÇÂ∫¶ O(m)

## ‰ª£Á†Å

‰ª£Á†ÅÊîØÊåÅÔºö Python3, JSÔºåCPP

Python3 Code:

```py
class Solution:
    def wordBreak(self, s: str, wordDict: List[str]) -> bool:
        wordDict = set(wordDict)
        @cache
        def dp(pos):
            if pos == len(s): return True
            cur = ''
            for nxt in range(pos, len(s)):
                cur += s[nxt]
                if cur in wordDict and dp(nxt + 1): return True
            return False
        return dp(0)
```

JS Code:

```js
/**
 * @param {string} s
 * @param {string[]} wordDict
 * @return {boolean}
 */
var wordBreak = function (s, wordDict) {
  const dp = Array(s.length + 1);
  dp[0] = true;
  for (let i = 0; i < s.length + 1; i++) {
    for (let word of wordDict) {
      if (word.length <= i && dp[i - word.length]) {
        if (s.substring(i - word.length, i) === word) {
          dp[i] = true;
        }
      }
    }
  }

  return dp[s.length] || false;
};
```

CPP Code:

```cpp
class Solution {
public:
    bool wordBreak(string s, vector<string>& dict) {
        unordered_set<string> st(begin(dict), end(dict));
        int N = s.size();
        vector<bool> dp(N + 1);
        dp[0] = true;
        for (int i = 1; i <= N; ++i) {
            for (int j = 0; j < i && !dp[i]; ++j) {
                dp[i] = dp[j] && st.count(s.substr(j, i - j));
            }
        }
        return dp[N];
    }
};

```

**Â§çÊùÇÂ∫¶ÂàÜÊûê**

‰ª§ n Âíå m ÂàÜÂà´‰∏∫Â≠óÁ¨¶‰∏≤ÂíåÂ≠óÂÖ∏ÁöÑÈïøÂ∫¶„ÄÇ

- Êó∂Èó¥Â§çÊùÇÂ∫¶Ôºö$O(n ^ 2)$
- Á©∫Èó¥Â§çÊùÇÂ∫¶Ôºö$O(m)$